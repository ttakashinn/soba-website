---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const faqs = {
  vi: [
    {
      icon: 'ğŸ’°',
      question: 'Chi phÃ­ dá»± Ã¡n chuyá»ƒn Ä‘á»•i sá»‘ trung bÃ¬nh lÃ  bao nhiÃªu?',
      answer: 'TÃ¹y quy mÃ´: SME nhá» (50-150 triá»‡u), SME vá»«a (150-300 triá»‡u), Enterprise (300-500 triá»‡u). ChÃºng tÃ´i tÆ° váº¥n miá»…n phÃ­ vÃ  bÃ¡o giÃ¡ chi tiáº¿t sau khi phÃ¢n tÃ­ch nhu cáº§u.'
    },
    {
      icon: 'â±ï¸',
      question: 'Thá»i gian triá»ƒn khai máº¥t bao lÃ¢u?',
      answer: 'ThÃ´ng thÆ°á»ng 2-4 thÃ¡ng cho dá»± Ã¡n ERP/CRM. Chia lÃ m nhiá»u sprint, cÃ³ thá»ƒ Ä‘Æ°a vÃ o sá»­ dá»¥ng tá»«ng pháº§n sá»›m hÆ¡n.'
    },
    {
      icon: 'ğŸ› ï¸',
      question: 'CÃ³ há»— trá»£ sau khi go-live khÃ´ng?',
      answer: 'CÃ³, chÃºng tÃ´i cÃ³ gÃ³i báº£o trÃ¬ 12-24 thÃ¡ng, support 24/7, training nhÃ¢n viÃªn vÃ  xá»­ lÃ½ bug miá»…n phÃ­ trong thá»i gian báº£o hÃ nh.'
    },
    {
      icon: 'ğŸ’³',
      question: 'Thanh toÃ¡n nhÆ° tháº¿ nÃ o?',
      answer: 'Linh hoáº¡t: 30% kÃ½ há»£p Ä‘á»“ng, 40% khi UAT, 30% khi go-live. Hoáº·c chia theo milestone cho dá»± Ã¡n lá»›n.'
    },
    {
      icon: 'âš™ï¸',
      question: 'CÃ´ng nghá»‡ sá»­ dá»¥ng cÃ³ thá»ƒ customize khÃ´ng?',
      answer: 'HoÃ n toÃ n. ChÃºng tÃ´i phÃ¡t triá»ƒn custom software phÃ¹ há»£p Ä‘áº·c thÃ¹ doanh nghiá»‡p, khÃ´ng dÃ¹ng template cÃ³ sáºµn.'
    },
    {
      icon: 'ğŸ—ºï¸',
      question: 'CÃ³ lÃ m viá»‡c vá»›i doanh nghiá»‡p á»Ÿ tá»‰nh khÃ´ng?',
      answer: 'CÃ³, chÃºng tÃ´i lÃ m remote hiá»‡u quáº£. ÄÃ£ cÃ³ khÃ¡ch hÃ ng á»Ÿ HÃ  Ná»™i, ÄÃ  Náºµng, TP.HCM vÃ  cÃ¡c tá»‰nh thÃ nh khÃ¡c.'
    },
    {
      icon: 'ğŸ”’',
      question: 'Báº£o máº­t dá»¯ liá»‡u nhÆ° tháº¿ nÃ o?',
      answer: 'NDA kÃ½ káº¿t, mÃ£ nguá»“n thuá»™c sá»Ÿ há»¯u khÃ¡ch hÃ ng, backup tá»± Ä‘á»™ng, SSL/TLS encryption, tuÃ¢n thá»§ GDPR náº¿u cáº§n.'
    },
    {
      icon: 'ğŸ“ˆ',
      question: 'CÃ³ thá»ƒ scale há»‡ thá»‘ng sau nÃ y khÃ´ng?',
      answer: 'CÃ³, kiáº¿n trÃºc Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ scale. Dá»… dÃ ng thÃªm tÃ­nh nÄƒng, tÄƒng users, migrate lÃªn cloud khi cáº§n.'
    }
  ],
  en: [
    {
      icon: 'ğŸ’°',
      question: 'What is the average cost of a digital transformation project?',
      answer: 'Depends on scale: Small SME ($2,000-6,000), Medium SME ($6,000-12,000), Enterprise ($12,000-20,000). We provide free consultation and detailed quotes after analyzing your needs.'
    },
    {
      icon: 'â±ï¸',
      question: 'How long does implementation take?',
      answer: 'Typically 2-4 months for ERP/CRM projects. Divided into multiple sprints, parts can be deployed earlier for immediate use.'
    },
    {
      icon: 'ğŸ› ï¸',
      question: 'Is there support after go-live?',
      answer: 'Yes, we offer 12-24 month maintenance packages, 24/7 support, employee training, and free bug fixes during the warranty period.'
    },
    {
      icon: 'ğŸ’³',
      question: 'What are the payment terms?',
      answer: 'Flexible: 30% upon contract signing, 40% at UAT, 30% at go-live. Or milestone-based payments for larger projects.'
    },
    {
      icon: 'âš™ï¸',
      question: 'Can the technology be customized?',
      answer: 'Absolutely. We develop custom software tailored to your business specifics, not using pre-made templates.'
    },
    {
      icon: 'ğŸ—ºï¸',
      question: 'Do you work with businesses in other cities/countries?',
      answer: 'Yes, we work remotely effectively. We have clients across Vietnam, Japan, and other countries.'
    },
    {
      icon: 'ğŸ”’',
      question: 'How do you ensure data security?',
      answer: 'NDA signed, source code owned by client, automatic backup, SSL/TLS encryption, GDPR compliant if needed.'
    },
    {
      icon: 'ğŸ“ˆ',
      question: 'Can the system be scaled later?',
      answer: 'Yes, architecture is designed for scaling. Easy to add features, increase users, migrate to cloud when needed.'
    }
  ],
  ja: [
    {
      icon: 'ğŸ’°',
      question: 'DXãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å¹³å‡è²»ç”¨ã¯ã„ãã‚‰ã§ã™ã‹ï¼Ÿ',
      answer: 'è¦æ¨¡ã«ã‚ˆã‚Šç•°ãªã‚Šã¾ã™ï¼šå°è¦æ¨¡SMEï¼ˆ30-90ä¸‡å††ï¼‰ã€ä¸­è¦æ¨¡SMEï¼ˆ90-180ä¸‡å††ï¼‰ã€å¤§ä¼æ¥­ï¼ˆ180-300ä¸‡å††ï¼‰ã€‚ãƒ‹ãƒ¼ã‚ºåˆ†æå¾Œã«ç„¡æ–™ç›¸è«‡ã¨è©³ç´°è¦‹ç©ã‚‚ã‚Šã‚’æä¾›ã—ã¾ã™ã€‚'
    },
    {
      icon: 'â±ï¸',
      question: 'å°å…¥ã«ã¯ã©ã®ãã‚‰ã„ã‹ã‹ã‚Šã¾ã™ã‹ï¼Ÿ',
      answer: 'ERP/CRMãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã€é€šå¸¸2-4ãƒ¶æœˆã§ã™ã€‚è¤‡æ•°ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆã«åˆ†ã‘ã¦ã€ä¸€éƒ¨ã‚’æ—©æœŸã«å±•é–‹ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚'
    },
    {
      icon: 'ğŸ› ï¸',
      question: 'æœ¬ç•ªç¨¼åƒå¾Œã®ã‚µãƒãƒ¼ãƒˆã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
      answer: 'ã¯ã„ã€12-24ãƒ¶æœˆã®ä¿å®ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€24æ™‚é–“365æ—¥ã‚µãƒãƒ¼ãƒˆã€ç¤¾å“¡ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã€ä¿è¨¼æœŸé–“ä¸­ã®ç„¡æ–™ãƒã‚°ä¿®æ­£ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚'
    },
    {
      icon: 'ğŸ’³',
      question: 'æ”¯æ‰•ã„æ¡ä»¶ã¯ã©ã†ãªã£ã¦ã„ã¾ã™ã‹ï¼Ÿ',
      answer: 'æŸ”è»Ÿã«å¯¾å¿œï¼šå¥‘ç´„æ™‚30%ã€UATæ™‚40%ã€æœ¬ç•ªç¨¼åƒæ™‚30%ã€‚å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã¯ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã®æ”¯æ‰•ã„ã‚‚å¯èƒ½ã§ã™ã€‚'
    },
    {
      icon: 'âš™ï¸',
      question: 'æŠ€è¡“ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã¯å¯èƒ½ã§ã™ã‹ï¼Ÿ',
      answer: 'ã‚‚ã¡ã‚ã‚“ã§ã™ã€‚æ—¢è£½ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã¯ãªãã€ãŠå®¢æ§˜ã®ãƒ“ã‚¸ãƒã‚¹ã«åˆã‚ã›ãŸã‚«ã‚¹ã‚¿ãƒ ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’é–‹ç™ºã—ã¾ã™ã€‚'
    },
    {
      icon: 'ğŸ—ºï¸',
      question: 'ä»–ã®éƒ½å¸‚/å›½ã®ä¼æ¥­ã¨ã‚‚ä»•äº‹ã‚’ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ',
      answer: 'ã¯ã„ã€åŠ¹æœçš„ã«ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ãƒ™ãƒˆãƒŠãƒ å…¨åœŸã€æ—¥æœ¬ã€ãã®ä»–ã®å›½ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã„ã¾ã™ã€‚'
    },
    {
      icon: 'ğŸ”’',
      question: 'ãƒ‡ãƒ¼ã‚¿ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¯ã©ã®ã‚ˆã†ã«ç¢ºä¿ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ',
      answer: 'NDAç· çµã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ‰€æœ‰ã€è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã€SSL/TLSæš—å·åŒ–ã€å¿…è¦ã«å¿œã˜ã¦GDPRæº–æ‹ ã€‚'
    },
    {
      icon: 'ğŸ“ˆ',
      question: 'å¾Œã§ã‚·ã‚¹ãƒ†ãƒ ã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã§ãã¾ã™ã‹ï¼Ÿ',
      answer: 'ã¯ã„ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚’è€ƒæ…®ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚æ©Ÿèƒ½è¿½åŠ ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å¢—åŠ ã€ã‚¯ãƒ©ã‚¦ãƒ‰ç§»è¡ŒãŒå®¹æ˜“ã§ã™ã€‚'
    }
  ]
};

const currentFaqs = faqs[lang as keyof typeof faqs] || faqs.vi;
const title = lang === 'ja' ? 'ã‚ˆãã‚ã‚‹è³ªå•' : lang === 'en' ? 'Frequently Asked Questions' : 'CÃ¢u há»i thÆ°á»ng gáº·p';
---

<section class="py-20 bg-white">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-4xl font-bold text-gray-900 mb-4">{title}</h2>
      <div class="w-24 h-1 bg-linear-to-r from-blue-600 to-blue-400 mx-auto rounded-full"></div>
    </div>

    <div class="space-y-4" x-data="{ openIndex: null }">
      {currentFaqs.map((faq, index) => (
        <div
          class="border border-gray-200 rounded-xl overflow-hidden transition-all duration-300 hover:border-blue-300"
          :class="openIndex === {index} ? 'shadow-lg border-blue-400' : 'shadow-sm'"
        >
          <button
            type="button"
            class="w-full px-6 py-5 text-left flex items-center justify-between gap-4 bg-white hover:bg-gray-50 transition-colors"
            @click={`openIndex = openIndex === ${index} ? null : ${index}`}
            aria-expanded="false"
            :aria-expanded={`openIndex === ${index}`}
          >
            <div class="flex items-center gap-4">
              <span class="text-2xl flex-shrink-0">{faq.icon}</span>
              <span class="font-semibold text-gray-900 text-lg">{faq.question}</span>
            </div>
            <svg
              class="w-6 h-6 text-blue-600 flex-shrink-0 transition-transform duration-300"
              :class={`openIndex === ${index} ? 'rotate-180' : ''`}
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
          </button>

          <div
            class="overflow-hidden transition-all duration-300 ease-out"
            x-show={`openIndex === ${index}`}
            x-collapse
          >
            <div class="px-6 pb-5 pt-0">
              <div class="pl-12 text-gray-600 leading-relaxed border-l-2 border-blue-200 ml-1">
                {faq.answer}
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  [x-cloak] { display: none !important; }
</style>
